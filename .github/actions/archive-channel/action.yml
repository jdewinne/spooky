name: 'Replicated archive Channel'
description: 'Archive a channel'
inputs:
  replicated-app:
    description: 'Replicated App Slug.'
    required: true
    default: ''
  replicated-api-token:
    description: 'Replicated API Token.'
    required: true
    default: ''
  channel-name:
    description: 'The name of the Channel to archive.'
    required: true
runs:
  using: "composite"
  steps:
  - name: 'Inspect a channel'
    id: 'inspect-channel'
    uses: replicatedhq/reliability-actions-lib/inspect-channel@v0.0.1-alpha.5
    with:
      replicated-app: ${{ inputs.replicated-app }}
      replicated-api-token: ${{ inputs.replicated-api-token }}
      channel-name: ${{ inputs.channel-name }}
  - name: 'Replicated CLI archive Channel'
    id: 'cli-archive-channel'
    uses: jdewinne/gh-actions/cli-archive-channel@v0.0.4
    with:
      replicated-app: ${{ inputs.replicated-app }}
      replicated-api-token: ${{ inputs.replicated-api-token }}
      channel-id: ${{ steps.inspect-channel.outputs.channel-id }}